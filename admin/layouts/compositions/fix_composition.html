<div class="admin_section_title" style="margin-top: 4%;">
    Изменение существующего трека
</div>

<form action="../admin/compositions.php" method="post" name="fix_track_form" enctype="multipart/form-data",>
    <div class="append_form_container">
        Название трека: <input type="text" name="fix_track_title" class="text_input_field" value="OLD_TITLE"><br>
        Исполнитель: <select name="fix_track_author" class="list_input_field">
            AUTHORS
        </select><br>
        Жанр: <select name="fix_track_genre" class="list_input_field">
            GENRES
        </select><br>
        <div class="image_input_container">
            <div class="image_title">
                <div style="height: 80%;">
                    Обложка трека: 
                    <div class="file_form">
                        <input class="file_form_button" type="button" onclick="document.getElementById('track_cover_input').click()" value="Выберите файл" /><br>
                        <span id="imageNameSpan">SHORT_IMAGE_SRC</span>
                    </div>
                </div>
            </div>
            <div class="image_cover">
                <img id="image-preview" src=IMAGE_SRC>
            </div>
        </div>
        <br>
        <div style="display: flex; width: 100%; height: 10%; align-items: center;">
            <div style="width: 60%">
                Аудиофайл:
                <div class="file_form">
                    <input class="file_form_button" type="button" onclick="document.getElementById('track_file_input').click()" value="Выберите файл" /><br>
                    <span id="fileNameSpan">FILE_SRC</span>
                </div>
            </div>
            <div class="admin_submit_button_container">
                <button type="submit" class="admin_submit_button">Принять изменения</button>
            </div>
        </div>
    </div>
    <input type="file" name="fix_track_cover" id="track_cover_input" onchange="ImageSelected()" style="width: 0;">
    <input type="file" name="fix_track_file" id="track_file_input" onchange="FileSelected()" style="width: 0;">
    <input type="text" name="old_cover_src" style="width: 0;" value="SHORT_IMAGE_SRC">
    <input type="text" name="old_file_src" style="width: 0;" value="FILE_SRC">
    <input type="text" name="old_track_id" style="width: 0;" value="OLD_TRACK_ID">
</form>

<script>
    function ImageSelected(e) {
        file = document.getElementById('track_cover_input').files[0];
        document.getElementById('imageNameSpan').innerHTML = file.name;
        displayImage();
    }
    function FileSelected(e) {
        file = document.getElementById('track_file_input').files[0];
        document.getElementById('fileNameSpan').innerHTML = file.name;
        displayImage();
    }
    function displayImage() {
      var preview = document.querySelector('#image-preview');
      var file = document.querySelector('#track_cover_input').files[0];
      var reader = new FileReader();
  
      reader.addEventListener("load", function () {
        preview.src = reader.result;
      }, false);
  
      if (file) {
        reader.readAsDataURL(file);
      }
    }
  </script>